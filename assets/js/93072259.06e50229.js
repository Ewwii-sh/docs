"use strict";(self.webpackChunkewwii_docs=self.webpackChunkewwii_docs||[]).push([[4522],{508:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var i=s(9729);const r={},c=i.createContext(r);function o(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(c.Provider,{value:n},e.children)}},1198:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"config_and_syntax/expression_language","title":"The Rhai Expression Engine","description":"Ewwii uses Rhai as its core expression and scripting engine. This means your configuration is more than just static values or simple substitutions\u2014it\u2019s real code, and you can use it anywhere dynamic behavior is needed.","source":"@site/versioned_docs/version-0.3.0-alpha/config_and_syntax/expression_language.md","sourceDirName":"config_and_syntax","slug":"/config_and_syntax/expression_language","permalink":"/docs/config_and_syntax/expression_language","draft":false,"unlisted":false,"tags":[],"version":"0.3.0-alpha","sidebarPosition":2.4,"frontMatter":{"sidebar_position":2.4},"sidebar":"tutorialSidebar","previous":{"title":"Rendering and Best Practices","permalink":"/docs/config_and_syntax/rendering_and_best_practices"},"next":{"title":"Variables","permalink":"/docs/config_and_syntax/variables"}}');var r=s(5813),c=s(508);const o={sidebar_position:2.4},t="The Rhai Expression Engine",l={},a=[{value:"Example",id:"example",level:2},{value:"Core Features",id:"core-features",level:2},{value:"Common Built-in Functions",id:"common-built-in-functions",level:2},{value:"Dynamic Usage",id:"dynamic-usage",level:2},{value:"TL;DR",id:"tldr",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"the-rhai-expression-engine",children:"The Rhai Expression Engine"})}),"\n",(0,r.jsxs)(n.p,{children:["Ewwii uses ",(0,r.jsx)(n.a,{href:"https://rhai.rs/",children:"Rhai"})," as its core expression and scripting engine. This means your configuration is more than just static values or simple substitutions\u2014it\u2019s ",(0,r.jsx)(n.strong,{children:"real code"}),", and you can use it anywhere dynamic behavior is needed."]}),"\n",(0,r.jsx)(n.p,{children:"Rhai expressions can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Perform logic and branching (",(0,r.jsx)(n.code,{children:"if"}),", ",(0,r.jsx)(n.code,{children:"match"}),", ",(0,r.jsx)(n.code,{children:"? :"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Handle mathematical calculations and string operations"}),"\n",(0,r.jsx)(n.li,{children:"Access nested data from arrays, maps, or JSON"}),"\n",(0,r.jsx)(n.li,{children:"Run custom functions"}),"\n",(0,r.jsx)(n.li,{children:"Be used directly in layout definitions, widget attributes, and style rules"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Unlike Yuck, where expressions were embedded in ",(0,r.jsx)(n.code,{children:"{ ... }"})," or ",(0,r.jsx)(n.code,{children:"${ ... }"}),", Rhai treats expressions as ",(0,r.jsx)(n.strong,{children:"native"}),". They don\u2019t need to be wrapped in special delimiters. If you can write it in Rhai, it just works."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'let value = 12 + foo * 10;\n\nbox(#{\n  class: "baz"\n  orientation: "h",\n}, [\n  button(#{\n    class: button_active ? "active" : "inactive",\n    on_click: "toggle_thing",\n    label: `Some math: ${value}`,\n  }),\n]);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"core-features",children:"Core Features"}),"\n",(0,r.jsx)(n.p,{children:"Rhai supports a wide range of expression capabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mathematics"}),": ",(0,r.jsx)(n.code,{children:"+"}),", ",(0,r.jsx)(n.code,{children:"-"}),", ",(0,r.jsx)(n.code,{children:"*"}),", ",(0,r.jsx)(n.code,{children:"/"}),", ",(0,r.jsx)(n.code,{children:"%"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Comparisons"}),": ",(0,r.jsx)(n.code,{children:"=="}),", ",(0,r.jsx)(n.code,{children:"!="}),", ",(0,r.jsx)(n.code,{children:"<"}),", ",(0,r.jsx)(n.code,{children:">"}),", ",(0,r.jsx)(n.code,{children:"<="}),", ",(0,r.jsx)(n.code,{children:">="})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Boolean logic"}),": ",(0,r.jsx)(n.code,{children:"&&"}),", ",(0,r.jsx)(n.code,{children:"||"}),", ",(0,r.jsx)(n.code,{children:"!"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Conditionals"}),": ",(0,r.jsx)(n.code,{children:"if/else"}),", ternary (",(0,r.jsx)(n.code,{children:"cond ? a : b"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regex matching"}),": ",(0,r.jsx)(n.code,{children:"=~"})," operator (Rust-style regex)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional access"}),": ",(0,r.jsx)(n.code,{children:"?."})," and ",(0,r.jsx)(n.code,{children:"?.[index]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data structures"}),": maps/arrays (",(0,r.jsx)(n.code,{children:"obj.field"}),", ",(0,r.jsx)(n.code,{children:"arr[3]"}),", ",(0,r.jsx)(n.code,{children:'map["key"]'}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Function calls"}),": standard and Ewwii-specific built-ins (see below)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"String interpolation"}),": ",(0,r.jsx)(n.code,{children:"`Value is ${value}`"})," (standard Rhai feature)"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Rhai only allows string interpolation only for the strings that are quoted in `` similar to JavaScript."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Learn more about it ",(0,r.jsx)(n.a,{href:"https://rhai.rs/book/ref/strings-chars.html?interpolation#string-interpolation",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-built-in-functions",children:"Common Built-in Functions"}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,r.jsx)(n.em,{children:"You may recognize some of these from the old expression system\u2014but now they're just Rhai functions."})]}),"\n",(0,r.jsx)(n.p,{children:"Examples include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"round()"}),", ",(0,r.jsx)(n.code,{children:"floor()"}),", ",(0,r.jsx)(n.code,{children:"ceil()"}),", ",(0,r.jsx)(n.code,{children:"powi()"}),", ",(0,r.jsx)(n.code,{children:"powf()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"min()"}),", ",(0,r.jsx)(n.code,{children:"max()"}),", ",(0,r.jsx)(n.code,{children:"sin()"}),", ",(0,r.jsx)(n.code,{children:"cos()"}),", etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replace()"}),", ",(0,r.jsx)(n.code,{children:"matches()"}),", ",(0,r.jsx)(n.code,{children:"captures()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"strlength()"}),", ",(0,r.jsx)(n.code,{children:"arraylength()"}),", ",(0,r.jsx)(n.code,{children:"objectlength()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"jq()"})," \u2013 run jaq-compatible filters on JSON data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"get_env()"})," \u2013 read environment variables"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"formattime()"})," \u2013 format UNIX timestamps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"formatbytes()"})," \u2013 format file sizes (IEC or SI)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-usage",children:"Dynamic Usage"}),"\n",(0,r.jsx)(n.p,{children:"Because expressions are just Rhai, you can now write real logic inline or break it into reusable functions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'fn status_text(active) {\n  return active ? "enabled" : "disabled";\n}\n\nlabel({\n  text: `Status: ${status_text(system_active)}`\n});\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"tldr",children:"TL;DR"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"If you\u2019ve used scripting languages like JavaScript or Lua, you\u2019ll feel at home. Rhai gives you real control\u2014not just interpolation tricks."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);