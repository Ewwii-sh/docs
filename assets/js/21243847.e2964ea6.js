"use strict";(self.webpackChunkewwii_docs=self.webpackChunkewwii_docs||[]).push([[5488],{508:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(9729);const r={},c=s.createContext(r);function t(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(c.Provider,{value:n},e.children)}},6392:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"config_and_syntax/expression_language","title":"The Rhai Expression Engine","description":"Ewwii uses Rhai as its core expression and scripting engine. This means your configuration is more than just static values or simple substitutions. It\u2019s real code, and you can use it anywhere dynamic behavior is needed.","source":"@site/docs/config_and_syntax/expression_language.md","sourceDirName":"config_and_syntax","slug":"/config_and_syntax/expression_language","permalink":"/docs/next/config_and_syntax/expression_language","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2.4,"frontMatter":{"sidebar_position":2.4},"sidebar":"tutorialSidebar","previous":{"title":"Rendering and Best Practices","permalink":"/docs/next/config_and_syntax/rendering_and_best_practices"},"next":{"title":"Variables","permalink":"/docs/next/config_and_syntax/variables"}}');var r=i(5813),c=i(508);const t={sidebar_position:2.4},o="The Rhai Expression Engine",l={},a=[{value:"Example",id:"example",level:2},{value:"Core Features",id:"core-features",level:2},{value:"Common Built-in Functions",id:"common-built-in-functions",level:2},{value:"Dynamic Usage",id:"dynamic-usage",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"the-rhai-expression-engine",children:"The Rhai Expression Engine"})}),"\n",(0,r.jsxs)(n.p,{children:["Ewwii uses ",(0,r.jsx)(n.a,{href:"https://rhai.rs/",children:"Rhai"})," as its core expression and scripting engine. This means your configuration is more than just static values or simple substitutions. It\u2019s ",(0,r.jsx)(n.strong,{children:"real code"}),", and you can use it anywhere dynamic behavior is needed."]}),"\n",(0,r.jsx)(n.p,{children:"Rhai expressions can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Perform logic and branching (",(0,r.jsx)(n.code,{children:"if"}),", ",(0,r.jsx)(n.code,{children:"match"}),", ",(0,r.jsx)(n.code,{children:"? :"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Handle mathematical calculations and string operations"}),"\n",(0,r.jsx)(n.li,{children:"Access nested data from arrays, maps, or JSON"}),"\n",(0,r.jsx)(n.li,{children:"Run custom functions"}),"\n",(0,r.jsx)(n.li,{children:"Be used directly in layout definitions, widget attributes, and style rules"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Unlike Yuck, where expressions were embedded in ",(0,r.jsx)(n.code,{children:"{ ... }"})," or ",(0,r.jsx)(n.code,{children:"${ ... }"}),", Rhai treats expressions as ",(0,r.jsx)(n.strong,{children:"native"}),". They don\u2019t need to be wrapped in special delimiters. If you can write it in Rhai, it just works."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'let value = 12 + foo * 10;\n\nbox(#{\n  class: "baz"\n  orientation: "h",\n}, [\n  button(#{\n    class: button_active ? "active" : "inactive",\n    on_click: "toggle_thing",\n    label: `Some math: ${value}`,\n  }),\n]);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"core-features",children:"Core Features"}),"\n",(0,r.jsx)(n.p,{children:"Rhai supports a wide range of expression capabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mathematics"}),": ",(0,r.jsx)(n.code,{children:"+"}),", ",(0,r.jsx)(n.code,{children:"-"}),", ",(0,r.jsx)(n.code,{children:"*"}),", ",(0,r.jsx)(n.code,{children:"/"}),", ",(0,r.jsx)(n.code,{children:"%"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Comparisons"}),": ",(0,r.jsx)(n.code,{children:"=="}),", ",(0,r.jsx)(n.code,{children:"!="}),", ",(0,r.jsx)(n.code,{children:"<"}),", ",(0,r.jsx)(n.code,{children:">"}),", ",(0,r.jsx)(n.code,{children:"<="}),", ",(0,r.jsx)(n.code,{children:">="})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Boolean logic"}),": ",(0,r.jsx)(n.code,{children:"&&"}),", ",(0,r.jsx)(n.code,{children:"||"}),", ",(0,r.jsx)(n.code,{children:"!"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Conditionals"}),": ",(0,r.jsx)(n.code,{children:"if/else"}),", ternary (",(0,r.jsx)(n.code,{children:"cond ? a : b"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regex matching"}),": ",(0,r.jsx)(n.code,{children:"=~"})," operator (Rust-style regex)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional access"}),": ",(0,r.jsx)(n.code,{children:"?."})," and ",(0,r.jsx)(n.code,{children:"?.[index]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data structures"}),": maps/arrays (",(0,r.jsx)(n.code,{children:"obj.field"}),", ",(0,r.jsx)(n.code,{children:"arr[3]"}),", ",(0,r.jsx)(n.code,{children:'map["key"]'}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Function calls"}),": standard and Ewwii-specific built-ins (see below)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"String interpolation"}),": ",(0,r.jsx)(n.code,{children:"`Value is ${value}`"})," (standard Rhai feature)"]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"Rhai only allows string interpolation only for the strings that are quoted in `` similar to JavaScript."}),(0,r.jsxs)(n.p,{children:["Learn more about it ",(0,r.jsx)(n.a,{href:"https://rhai.rs/book/ref/strings-chars.html?interpolation#string-interpolation",children:"here"}),"."]})]}),"\n",(0,r.jsx)(n.h2,{id:"common-built-in-functions",children:"Common Built-in Functions"}),"\n",(0,r.jsx)(n.p,{children:"Examples include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"round()"}),", ",(0,r.jsx)(n.code,{children:"floor()"}),", ",(0,r.jsx)(n.code,{children:"ceil()"}),", ",(0,r.jsx)(n.code,{children:"powi()"}),", ",(0,r.jsx)(n.code,{children:"powf()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"min()"}),", ",(0,r.jsx)(n.code,{children:"max()"}),", ",(0,r.jsx)(n.code,{children:"sin()"}),", ",(0,r.jsx)(n.code,{children:"cos()"}),", etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replace()"}),", ",(0,r.jsx)(n.code,{children:"matches()"}),", ",(0,r.jsx)(n.code,{children:"captures()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"strlength()"}),", ",(0,r.jsx)(n.code,{children:"arraylength()"}),", ",(0,r.jsx)(n.code,{children:"objectlength()"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"jq()"})," \u2013 run jaq-compatible filters on JSON data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"get_env()"})," \u2013 read environment variables"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"formattime()"})," \u2013 format UNIX timestamps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"formatbytes()"})," \u2013 format file sizes (IEC or SI)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["To learn about all the built-in functions, check out ",(0,r.jsx)(n.a,{href:"../modules/global",children:"Rhai Global Modules"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-usage",children:"Dynamic Usage"}),"\n",(0,r.jsx)(n.p,{children:"Because expressions are just Rhai, you can now write real logic inline or break it into reusable functions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'fn status_text(active) {\n  return active ? "enabled" : "disabled";\n}\n\nlabel({\n  text: `Status: ${status_text(system_active)}`\n});\n'})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);